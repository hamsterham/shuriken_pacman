// SpaceInvaders.c
// Runs on LM4F120/TM4C123
// Jonathan Valvano and Daniel Valvano
// This is a starter project for the edX Lab 15
// In order for other students to play your game
// 1) You must leave the hardware configuration as defined
// 2) You must not add/remove any files from the project
// 3) You must add your code only this this C file
// I.e., if you wish to use code from sprite.c or sound.c, move that code in this file
// 4) It must compile with the 32k limit of the free Keil

// This virtual Nokia project only runs on the real board, this project cannot be simulated
// Instead of having a real Nokia, this driver sends Nokia
//   commands out the UART to TExaSdisplay
// The Nokia5110 is 48x84 black and white
// pixel LCD to display text, images, or other information.

// April 19, 2014
// http://www.spaceinvaders.de/
// sounds at http://www.classicgaming.cc/classics/spaceinvaders/sounds.php
// http://www.classicgaming.cc/classics/spaceinvaders/playguide.php
/* This example accompanies the books
   "Embedded Systems: Real Time Interfacing to Arm Cortex M Microcontrollers",
   ISBN: 978-1463590154, Jonathan Valvano, copyright (c) 2013

   "Embedded Systems: Introduction to Arm Cortex M Microcontrollers",
   ISBN: 978-1469998749, Jonathan Valvano, copyright (c) 2013

 Copyright 2014 by Jonathan W. Valvano, valvano@mail.utexas.edu
    You may use, edit, run or distribute this file
    as long as the above copyright notice remains
 THIS SOFTWARE IS PROVIDED "AS IS".  NO WARRANTIES, WHETHER EXPRESS, IMPLIED
 OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, IMPLIED WARRANTIES OF
 MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE APPLY TO THIS SOFTWARE.
 VALVANO SHALL NOT, IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL,
 OR CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.
 For more information about my classes, my research, and my books, see
 http://users.ece.utexas.edu/~valvano/
 */
// ******* Required Hardware I/O connections*******************
// PA1, PA0 UART0 connected to PC through USB cable
// Slide pot pin 1 connected to ground
// Slide pot pin 2 connected to PE2/AIN1
// Slide pot pin 3 connected to +3.3V 
// rotate button connected to PE0
// shoot button connected to PE1
// 8*R resistor DAC bit 0 on PB0 (least significant bit)
// 4*R resistor DAC bit 1 on PB1
// 2*R resistor DAC bit 2 on PB2
// 1*R resistor DAC bit 3 on PB3 (most significant bit)
// LED on PB4, signal can shoot
// LED on PB5, flashes, signals a kill/powerup

#include "tm4c123gh6pm.h"
#include "Nokia5110.h"
#include "Random.h"
#include "TExaS.h"
#include "Math.h"
#include "my_sound.h"
#include "String.h"
#include "stdio.h"
#include "img_enemyGhost_dying.c"
#include "img_pacman_dying.c"

void DisableInterrupts(void); // Disable interrupts
void EnableInterrupts(void);  // Enable interrupts
void Timer2_Init(unsigned long period);
void Delay100ms(unsigned long count); // time delay in 0.1 seconds
void Delay1ms(unsigned long msec);    // time delay in 0.001 seconds
void Splash_Screen(void);
void PortB_Init(void);
void PortE_Init(void);
void Draw(void);
void Move(void);
void MovePac(void);
void MoveShruikens(void);
void MoveGhosts(void);
void CollisionDectection(void);
void Buttons_In(void);
unsigned long ADC0_In(void);
void OutofScreenChecks(void);
void DisplayWinGame(void);
void DisplayGameOver(void);
void ShootLEDOnOff(void);
void GhostDesiredDirection(int ghost_index);
  



// *************************** Images ***************************

// PacMan
// includes one or two blacked out row around border of the image,
// depending on orientation of image, to prevent smearing when moved 2 pixel 
// width=10 x height=10
const unsigned char img_pacmandownA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmandownB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanupA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanupB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanleftA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x80, 0xFF, 0x00, 0x80,
 0x00, 0xFF, 0x00, 0x80, 0x80, 0xFF, 0x80, 0x00, 0x00, 0xFF, 0x80, 0x00, 0x80, 0xFF, 0x80, 0x80, 0x00, 0xFF, 0x80, 0x80, 0x80, 0xFF, 0xC0, 0xC0, 0xC0, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF,
 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanleftB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x80, 0xFF, 0x00, 0x80,
 0x00, 0xFF, 0x00, 0x80, 0x80, 0xFF, 0x80, 0x00, 0x00, 0xFF, 0x80, 0x00, 0x80, 0xFF, 0x80, 0x80, 0x00, 0xFF, 0x80, 0x80, 0x80, 0xFF, 0xC0, 0xC0, 0xC0, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF,
 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanrightA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_pacmanrightB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};



// enemy Ghost
// includes one blacked out row around border of the image to prevent smearing when moved 1 pixel 
// width=10 x height=10
const unsigned char img_enemyghostA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0xFF, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00,
 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x00, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

const unsigned char img_enemyghostB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00,
 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x00, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};

// Power-Up
// includes one blacked out row around border of the image to prevent smearing when moved 1 pixel 
// width=10 x height=10
const unsigned char img_powerup[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0xFF, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0xF0,
 0xFF, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

};


const unsigned char img_shurikenA[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
};

const unsigned char img_shurikenB[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
};

/*const unsigned char img_splash_screen[] ={
 0x42, 0x4D, 0xB6, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x54, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x40, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF,
 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xFF,
 0xFF, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x0F,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0xFF, 0xF0, 0x00, 0xF0, 0x00, 0xFF, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00,
 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0xFF, 0x00,
 0xFF, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xF0,
 0x0F, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0xFF, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0xFF, 0xFF, 0xF0, 0x0F, 0xFF, 0x00, 0xF0, 0x00,
 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x0F,
 0xF0, 0x0F, 0xFF, 0x00, 0xFF, 0xFF, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xF0, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0xFF, 0xFF, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x0F, 0xF0, 0x0F, 0xF0, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0xFF, 0xFF, 0xF0, 0x0F,
 0xFF, 0x00, 0x0F, 0x00, 0xF0, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x0F, 0xFF, 0xF0, 0x0F, 0xF0, 0x0F, 0x00,
 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0xF0, 0x0F, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0xFF, 0x00, 0xF0, 0x00, 0x00, 0x0F,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF
};
*/
// *************************** Capture image dimensions out of BMP**********

#define SCREENW               83      // screen dimensions
#define SCREENH               47
#define SHURIKEN              10      // shuriken square dimension
#define PACMANW               10      // PACMAN dimensions
#define PACMANH               10
#define GHOSTW                10      // GHOST dimensions
#define GHOSTH                10
#define POWERUP               10      // POWER-UP SQUARE dimension

#define READY_GAME            0       // game in initial stage
#define PLAYING_GAME          1       // game is in play
#define WIN_GAME              2       // game is won
#define GAME_OVER             4       // game is lost, lose 3 lives

#define ORIENTATIONH          0       // orientation of pacman is horizontal
#define ORIENTATIONV          1       // orientation of pacman is vertical
#define DIRECTIONL            0       // the direction pacman is heading, 
#define DIRECTIONR            1       // and for whether to plus or minus speed from object xpos_ypos
#define DIRECTIOND            2
#define DIRECTIONU            3
#define DIRECTIONSTOP         4

#define SLIDE_POT_LEFT        -2      // position of meter from slide pot
#define SLIDE_POT_RIGHT       2
#define SLIDE_POT_CENTER      0
#define SPD_LEFT_UP_NORM      -2       // normal SPEED for different directions
#define SPD_RIGHT_DOWN_NORM   2       
#define SPD_STOP              0       
#define SPD_LEFT_UP_SLOW      -1       // slow SPEED for different directions
#define SPD_RIGHT_DOWN_SLOW   1       
#define SPD_LEFT_UP_FAST      -3       // fast SPEED for different directions
#define SPD_RIGHT_DOWN_FAST   3    

#define DEAD                  0       // states for various objects
#define ALIVE                 2       
#define FLYING                1       // use for shuriken state
#define DYING                 1

#define MAXLEVELS             5       // should be 5
#define MAXLIVES              3       // maximum number of live to begin with
#define MAX_NUM_ENEMIES       6       // maximum number of enemies
#define MAX_NUM_POWERUPS      3       // maximum number of power-ups

// PE 0 - Rotate button
#define ROTATE 					(*((volatile unsigned long *)0x40024004))
// PE 1 - shoot button
#define SHOOT 					(*((volatile unsigned long *)0x40024008))
  
// Global Variable
/* 
current_game_level      the current game level player is in
num_lives_left          number of lives left
current_num_power_ups   number of powerups player has captured
num_allowed_shots       number of shots the player can shoot
score                   score 
FrameCount              frame counter for animating pacman and ghosts
current_game_state      what state the game is in, game_over win_game etc.
ADCdata                 value of poteionmeter
Semaphore               flag, set and clear at 30 Hz
TimeCount               increment at every Timer2A_Handler
*/
int current_game_level, num_lives_left , current_num_power_ups , score, num_allowed_shots;
unsigned long FrameCount = 0;
unsigned char current_game_state = READY_GAME;
unsigned long ADCdata;        // 12-bit data from slide pot, range 0 to 4095
int go_to_next_level = 0;     // flag
unsigned long Semaphore;      // a flag signaling 1 cycle of the 30Hz is up
unsigned long TimerCount;

struct Game_Level { 
  unsigned char level;              // game level
  unsigned char num_ghost;          // number of ghost for this level
  unsigned char num_power_up;       // number of power ups for this level  
};

struct pacmam_struct {
  int xpos, ypos;
  int center_x, center_y;
  unsigned char orientation;  // going horizontal or vertical
  unsigned char direction;  // direction pacman is facing  
  const unsigned char *image[4][2];  // 4 directions, each two pointers to images
  const unsigned char *image_dying[11];  // for animating DYING pacman only
  unsigned char pacman_state;
  unsigned long dying_FrameCounter;       // frame counter for animating dying seq images
  int speed;
};

struct enemyghost_struct {
  int xpos, ypos;   
  int center_x, center_y;
  const unsigned char *image[2];  // two pointers to images
  unsigned char ghost_state;  
//  int speed;
  unsigned char direction;  
  unsigned long dying_FrameCounter;
  const unsigned char *image_dying[11];     // for animating DYING pacman only
};

struct powerup_struct {
  int xpos, ypos;
  int center_x, center_y;
  const unsigned char *image;
  unsigned char powerup_state;
};

struct shuriken_struct {
  int xpos, ypos;
  int center_x, center_y;
  const unsigned char *image[2];
  unsigned char state;
  //unsigned char orientation;  // going horizontal or vertical
  unsigned char direction;  // direction pacman is facing
//  int speed;
};


/*
struct Floor_plan {         // 
  unsigned char game_level;
  unsigned char obstacles[84][48];      // pixel position indicating is there an obstacle  
  const unsigned char * image;
}; */


typedef struct Game_Level     Level;
typedef struct pacmam_struct  Pacman;
typedef struct enemyghost_struct EnemyGhost;
typedef struct powerup_struct PowerUp;
typedef struct shuriken_struct Shuriken;
//typedef struct Floor_plan     floor_plan;

Level game_level[MAXLEVELS];
Pacman pac;
EnemyGhost enemyGhosts[MAX_NUM_ENEMIES];
PowerUp powerups[MAX_NUM_POWERUPS] ;
Shuriken shurikens[MAX_NUM_POWERUPS];
//floor_plan floor_info[MAXLEVEL];

void init_game_levels(void){
  int i ;  
  for(i=0; i< MAXLEVELS;i++){
    game_level[i].level = i;
    game_level[i].num_ghost = i + 2;
    game_level[i].num_power_up = i+1;
    if(game_level[i].num_ghost > MAX_NUM_ENEMIES)
      game_level[i].num_ghost = MAX_NUM_ENEMIES;
    if(game_level[i].num_power_up > MAX_NUM_POWERUPS)
      game_level[i].num_power_up = MAX_NUM_POWERUPS;
  }
}

/*void init_floor_plan(void){
  int i;
  for(i=0;i<MAXLEVEL;i++){
    floor_info[i].game_level=i+1;
    //floor_info[i].image = 
    //floor_info[i].obstacles = 
  }
}*/

void init_pac(void){
  pac.orientation = ORIENTATIONH;      // degault to horizontal, facing right
  pac.direction = DIRECTIONR;  
  pac.xpos = 0;           // initial position
  //pac.ypos = SCREENH;
  pac.ypos = PACMANH;
  pac.center_x= pac.xpos + PACMANW/2;
  pac.center_y = pac.ypos - PACMANH/2;  
  pac.image[DIRECTIONL][0] = img_pacmanleftA;
  pac.image[DIRECTIONL][1] = img_pacmanleftB ;
  pac.image[DIRECTIONR][0] = img_pacmanrightA;
  pac.image[DIRECTIONR][1] = img_pacmanrightB ;
  pac.image[DIRECTIOND][0] = img_pacmandownA; 
  pac.image[DIRECTIOND][1] = img_pacmandownB;  
  pac.image[DIRECTIONU][0] = img_pacmanupA;
  pac.image[DIRECTIONU][1] = img_pacmanupB;
  pac.pacman_state = ALIVE ;
  pac.speed = SPD_STOP;
  pac.dying_FrameCounter = 0;
  pac.image_dying[0] = img_pacmandieA;
  pac.image_dying[1] = img_pacmandieB;
  pac.image_dying[2] = img_pacmandieC;
  pac.image_dying[3] = img_pacmandieD;
  pac.image_dying[4] = img_pacmandieE;
  pac.image_dying[5] = img_pacmandieF;
  pac.image_dying[6] = img_pacmandieG;
  pac.image_dying[7] = img_pacmandieH;
  pac.image_dying[8] = img_pacmandieI;
  pac.image_dying[9] =img_pacmandieJ;
  pac.image_dying[10] = img_pacmandieK;
  
  
}

void init_enemies(int num_ghost){
  int i;  
  for(i=0;i<num_ghost;i++){
    enemyGhosts[i].ghost_state = ALIVE;
    // ensure there's a distance from pacman and doesn't go off screen    
    enemyGhosts[i].xpos = Random()%(83 - GHOSTW);  
    enemyGhosts[i].ypos = Random()%(47 - GHOSTH) + GHOSTH;
    enemyGhosts[i].image[0] = img_enemyghostA;
    enemyGhosts[i].image[1] = img_enemyghostB;
    enemyGhosts[i].center_x =  enemyGhosts[i].xpos + GHOSTW/2;
    enemyGhosts[i].center_y =  enemyGhosts[i].ypos - GHOSTH/2;
    enemyGhosts[i].dying_FrameCounter = 0;
    enemyGhosts[i].image_dying[0] = img_enemyGhostdieA;
    enemyGhosts[i].image_dying[1] = img_enemyGhostdieB;
    enemyGhosts[i].image_dying[2] = img_enemyGhostdieC;
    enemyGhosts[i].image_dying[3] = img_enemyGhostdieD;
    enemyGhosts[i].image_dying[4] = img_enemyGhostdieE;
    enemyGhosts[i].image_dying[5] = img_enemyGhostdieF;
    enemyGhosts[i].image_dying[6] = img_enemyGhostdieG;
    enemyGhosts[i].image_dying[7] = img_enemyGhostdieH;
    enemyGhosts[i].image_dying[8] = img_enemyGhostdieI;
    enemyGhosts[i].image_dying[9] = img_enemyGhostdieJ;
    enemyGhosts[i].image_dying[10] = img_enemyGhostdieK;
  }
}

void init_power_ups(int num_power_up){
  int i;
  for(i=0;i<num_power_up;i++){
    powerups[i].xpos = Random()%(83 - 2*POWERUP) + POWERUP;    
    powerups[i].ypos = Random()%(47 - POWERUP) + POWERUP;
    powerups[i].image = img_powerup;
    powerups[i].powerup_state = ALIVE;
    powerups[i].center_x = powerups[i].xpos + POWERUP/2;
    powerups[i].center_y = powerups[i].ypos - POWERUP/2;
  }
}

void init_shurikens(int num_power_up){
 int i;
  for(i=0;i<num_power_up;i++){
    shurikens[i].xpos = 20;
    shurikens[i].ypos = 20 ;    
    shurikens[i].image[0] = img_shurikenA;
    shurikens[i].image[1] = img_shurikenB;
    shurikens[i].state = DEAD;        // set default inactive DEAD    
    shurikens[i].direction = DIRECTIOND;
    shurikens[i].center_x = shurikens[i].xpos + SHURIKEN/2;
    shurikens[i].center_y = shurikens[i].xpos - SHURIKEN/2;    
  }
}

void init_game_level_objects(){  
  char str[2];
  init_pac();
  init_enemies(game_level[current_game_level].num_ghost);
  init_power_ups(game_level[current_game_level].num_power_up);
  init_shurikens(game_level[current_game_level].num_power_up);
  current_num_power_ups = 0;     // to be set to zero
  go_to_next_level = 0;         // reset flag  
  num_allowed_shots = 0;
  GPIO_PORTB_DATA_R = 0;
  Nokia5110_Clear();    
  Nokia5110_SetCursor(3, 1);
  Nokia5110_OutString("Level");
  Nokia5110_SetCursor(5, 2);
  sprintf(str, "%d", current_game_level+1);
  Nokia5110_OutString(str);    
  // Delay1ms(800);   // real board
  Delay1ms(200);      // simulation
  Nokia5110_ClearBuffer();  
}


int main(void){      
  TExaS_Init(NoLCD_NoScope);  // set system clock to 80 MHz
  // you cannot use both the Scope and the virtual Nokia (both need UART0)
  // Random_Init(1234);
  Random_Init(NVIC_ST_CURRENT_R);
  Nokia5110_Init();
  
  PortB_Init();
  PortE_Init();    
  init_game_levels();  
  
  EnableInterrupts(); // virtual Nokia uses UART0 interrupts
    
  // starting ==> display Splash screen and game info
  Splash_Screen();           

  //Nokia5110_ClearBuffer();
	//Nokia5110_DisplayBuffer();      // draw buffer

  // set global parameter
  current_game_level = 4 ;       // 0 to 4, to be set to 0
  current_game_state = PLAYING_GAME;    // game starts  
  num_lives_left = MAXLIVES;           // 3 lives    
  score = 0; 
  
  // game loop
  while(current_game_state == PLAYING_GAME){

    // initialize objects for game levels
    // e.g. ghosts , power-up , pacman etc
    // using game_level objects
    init_game_level_objects();  
    //Timer2_Init(80000000/12);     // 12 Hz REAL BOARD
    Timer2_Init(80000000/60);     // 60 Hz SIMULATION
    SysTick_Init(80000000/11025);                  // 11 kHz    
    
    // level loop
    while(1){           
      while(Semaphore==0){}   // loop until semaphore is set
      Semaphore = 0;          // reset flag
      // read in buttons
      Buttons_In();
      // read slide pot
      ADCdata = ADC0_In();        
      // decide pacman's direction
      // divide slide pot value (0 to 4095) into 3 sections        
      if(ADCdata < 1365){
        if(pac.orientation == ORIENTATIONH){
          pac.direction = DIRECTIONL;
          pac.speed = DIRECTIONL;
        } else {
          pac.direction = DIRECTIOND;
          pac.speed = DIRECTIOND;
        }
      } else if(ADCdata > 2730) {
        if(pac.orientation == ORIENTATIONH){
          pac.direction = DIRECTIONR;
          pac.speed = DIRECTIONR;
        } else {
          pac.direction = DIRECTIONU;
          pac.speed = DIRECTIONU;
        }
      } else {
        pac.speed = DIRECTIONSTOP;
      }
      
        // do collision detection only when pacman's alive
        if(pac.pacman_state == ALIVE){
          CollisionDectection();      
        }                     
      
        
          Move();           // move the necessary objects    
          ShootLEDOnOff();        
          Draw();           // draw the necessary objects                
        
        
      if(pac.pacman_state == DEAD){      
        current_num_power_ups = 0;        // reset
        break;                            // break from level loop
      } else if(current_num_power_ups >= game_level[current_game_level].num_power_up){
        current_num_power_ups = 0;        // reset
        go_to_next_level = 1;             // set flag
        break;
      }            
    }
       
    if(num_lives_left == 0){
      // player has no more lives, break from game loop            
      current_game_state = GAME_OVER;   
      break;
    }
    if(go_to_next_level == 1){
      score += 1000;
      go_to_next_level = 0;       // reset flag
      current_game_level++;
    }
    if(current_game_level>= MAXLEVELS){     
      // player has cleared all levels, break from game loop       
      current_game_level = MAXLEVELS-1;
      current_game_state = WIN_GAME;
      break;
    }    
  }
  if(score < 0){
    score = 0;
  }
  Nokia5110_ClearBuffer();
  if(current_game_state == GAME_OVER){
    // lose game scene    
    DisplayGameOver();
  } else if (current_game_state == WIN_GAME){
    // win game scene
    DisplayWinGame();
  }
      
}
  

// You can use this timer only if you learn how it works
void Timer2_Init(unsigned long period){ 
  unsigned long volatile delay;
  SYSCTL_RCGCTIMER_R |= 0x04;   // 0) activate timer2
  delay = SYSCTL_RCGCTIMER_R;
  TimerCount = 0;
  Semaphore = 0;
  TIMER2_CTL_R = 0x00000000;    // 1) disable timer2A during setup
  TIMER2_CFG_R = 0x00000000;    // 2) configure for 32-bit mode
  TIMER2_TAMR_R = 0x00000002;   // 3) configure for periodic mode, default down-count settings
  TIMER2_TAILR_R = period-1;    // 4) reload value
  TIMER2_TAPR_R = 0;            // 5) bus clock resolution
  TIMER2_ICR_R = 0x00000001;    // 6) clear timer2A timeout flag
  TIMER2_IMR_R = 0x00000001;    // 7) arm timeout interrupt  
  NVIC_PRI5_R = (NVIC_PRI5_R&0x00FFFFFF)|0x80000000; // 8) priority 4                                        
// interrupts enabled in the main program after all devices initialized
// vector number 39, interrupt number 23
  NVIC_EN0_R = 1<<23;           // 9) enable IRQ 23 in NVIC
  TIMER2_CTL_R = 0x00000001;    // 10) enable timer2A
}
void Timer2A_Handler(void){ 
  TIMER2_ICR_R = 0x00000001;   // acknowledge timer2A timeout
  //TimerCount++;  
  TimerCount = (TimerCount+1)&0x03; // 0,1,2,0,1,2...
  Semaphore = 1; // trigger Draw() and other functions in the main while
}

void Delay100ms(unsigned long count){
  unsigned long volatile time;
  while(count>0){
    time = 727240;  // 0.1sec at 80 MHz
    while(time){
	  	time--;
    }
    count--;
  }
}
// Inputs: Number of msec to delay
// Outputs: None
void Delay1ms(unsigned long msec){ 
  unsigned long count;
  while(msec > 0 ) {  // repeat while there are still delay
    count = 16000;    
    while (count > 0) { 
      count--;
    } // This while loop takes approximately 3 cycles
    msec--;
  }
}
void Splash_Screen(void){
  Nokia5110_Clear();  
  //Nokia5110_PrintBMP(0, 47, img_splash_screen, 0);
  Nokia5110_SetCursor(1, 1);
  Nokia5110_OutString("SHURIKEN");
  Nokia5110_SetCursor(3, 2);
  Nokia5110_OutString("PACMAN");
  //Nokia5110_DisplayBuffer();
  //Delay1ms(1500);          // real board
  Delay1ms(700);            // simulation
  // maximum number of line = 6
  // maxumum number of characters per line including space = 12
  // page 1
  Nokia5110_Clear();
  Nokia5110_SetCursor(0, 0);
  Nokia5110_OutString("Info: ");
  Nokia5110_SetCursor(0, 1);
  Nokia5110_OutString("Levels : 5");
  Nokia5110_SetCursor(0, 2);
  Nokia5110_OutString("Lives : 3");
  Nokia5110_SetCursor(0, 4);
  Nokia5110_OutString("Next (A)");
  while((GPIO_PORTE_DATA_R&0x03) == 0){   // wait for user to press any button and go to next page
  }
  // page 2
  Delay1ms(100);         // delay 400ms for button bounce
  Nokia5110_Clear();
  Nokia5110_SetCursor(0, 0);
  Nokia5110_OutString(" (contd):");
  Nokia5110_SetCursor(0, 1);
  Nokia5110_OutString("(A) rotate.");
  Nokia5110_SetCursor(0, 2);
  Nokia5110_OutString("(B) shoot.");
  Nokia5110_SetCursor(0, 4);
  // Nokia5110_OutString("Get power-up to shoot.");
  Nokia5110_OutString("1 power-up = 1 shuriken");
  while((GPIO_PORTE_DATA_R&0x03) == 0){   // wait for user to press any button and go to game
  } 
  Delay1ms(50);         // delay 40ms for button bounce and going to next screen
  Nokia5110_Clear();  
}

void PortB_Init(void){
  unsigned long volatile delay;
  SYSCTL_RCGC2_R |= 0x00000002;   // (a) activate clock for port B
  delay = SYSCTL_RCGC2_R;
  GPIO_PORTB_DIR_R |= 0x3F;       // (c) make PB5 to PB0 out
  GPIO_PORTB_DEN_R |= 0x3F;       //     enable digital I/O on PB5 to PB0
  GPIO_PORTB_PCTL_R &= ~0xFFFFFF; //  configure PB5 to PB0 as normal GPIO
  GPIO_PORTB_AFSEL_R &= ~0x3F;    //     disable alt funct on PB3 to PB0
  GPIO_PORTB_AMSEL_R &= ~0x3F;    //     disable analog functionality on 
  GPIO_PORTB_DR8R_R |= 0x3F;      
  GPIO_PORTB_DATA_R = 0;
}  

void PortE_Init(void){
  volatile unsigned long delay;
  SYSCTL_RCGC2_R |= 0x00000010;   // 1) activate clock for Port E
  delay = SYSCTL_RCGC2_R;         //    allow time for clock to stabilize
  GPIO_PORTE_DIR_R &= ~0x07;      // 2) make PE2, PE1, PE0 input
  GPIO_PORTE_AFSEL_R |= 0x04;     // 3) enable alternate function on PE2
  GPIO_PORTE_DEN_R &= ~0x04;      // 4) disable digital I/O on PE2
  GPIO_PORTE_DEN_R |= 0x03;      // 4) enable digital I/O on PE1 and PE0
  GPIO_PORTE_AMSEL_R |= 0x04;     // 5) enable analog function on PE2
  SYSCTL_RCGC0_R |= 0x00010000;   // 6) activate ADC0 
  delay = SYSCTL_RCGC2_R;         
  SYSCTL_RCGC0_R &= ~0x00000300;  // 7) configure for 125K 
  ADC0_SSPRI_R = 0x0123;          // 8) Sequencer 3 is highest priority
  ADC0_ACTSS_R &= ~0x0008;        // 9) disable sample sequencer 3
  ADC0_EMUX_R &= ~0xF000;         // 10) seq3 is software trigger
  ADC0_SSMUX3_R = (ADC0_SSMUX3_R&0xFFFFFFF0)+1; // 11) channel Ain1 (PE2)
  ADC0_SSCTL3_R = 0x0006;         // 12) no TS0 D0, yes IE0 END0
  ADC0_ACTSS_R |= 0x0008;         // 13) enable sample sequencer 3

}
  

void Draw(void){ 
  int i;
  Nokia5110_ClearBuffer();      
  // draw DYING pacman
  if(pac.pacman_state == DYING){  
    Nokia5110_PrintBMP(pac.xpos, pac.ypos, pac.image_dying[pac.dying_FrameCounter], 0);  
    pac.dying_FrameCounter++;
    if(pac.dying_FrameCounter>=11)
      pac.pacman_state = DEAD;
  }
  // draw power up
  for(i=0; i<game_level[current_game_level].num_power_up; i++){
    if(powerups[i].powerup_state == ALIVE){   
      Nokia5110_PrintBMP(powerups[i].xpos, powerups[i].ypos, powerups[i].image, 0);        
    }
  }  
  // draw ghost
  for(i=0; i<game_level[current_game_level].num_ghost; i++){
    if(enemyGhosts[i].ghost_state == ALIVE){ 
      Nokia5110_PrintBMP(enemyGhosts[i].xpos, enemyGhosts[i].ypos, enemyGhosts[i].image[FrameCount], 0);          
    }else if(enemyGhosts[i].ghost_state == DYING){ 
      Nokia5110_PrintBMP(enemyGhosts[i].xpos, enemyGhosts[i].ypos, enemyGhosts[i].image_dying[enemyGhosts[i].dying_FrameCounter], 0);    
      enemyGhosts[i].dying_FrameCounter++;
      if(enemyGhosts[i].dying_FrameCounter>=11){
        enemyGhosts[i].ghost_state = DEAD;
      }      
    }
  }
  // draw shurikens
  for(i=0; i<MAX_NUM_POWERUPS; i++){    
    if(shurikens[i].state == FLYING){    
      Nokia5110_PrintBMP(shurikens[i].xpos, shurikens[i].ypos, shurikens[i].image[FrameCount], 0);          
    }   
  }
  // draw ALIVE pacman
  if(pac.pacman_state == ALIVE){  
    Nokia5110_PrintBMP(pac.xpos, pac.ypos, pac.image[pac.direction][FrameCount], 0);  
  }
  Nokia5110_DisplayBuffer();      // draw buffer
  
  FrameCount = (FrameCount+1)&0x01; // 0,1,0,1,...
}

//------------ADC0_In------------
// Busy-wait Analog to digital conversion
// Input: none
// Output: 12-bit result of ADC conversion
unsigned long ADC0_In(void){  
  unsigned long result;
  ADC0_PSSI_R = 0x0008;            // 1) initiate SS3
  while((ADC0_RIS_R&0x08)==0){};   // 2) wait for conversion done
  result = ADC0_SSFIFO3_R&0xFFF;   // 3) read result (12-bit)
  ADC0_ISC_R = 0x0008;             // 4) acknowledge completion
  return result;
}

void Move(void){  
  if(pac.pacman_state == ALIVE){
    MovePac();            // move pacman
  }
  MoveGhosts();      // move ghost  
  MoveShruikens();      // move shurikens
}

void MovePac(void){    
  switch(pac.speed){
    case DIRECTIONL:
      pac.xpos += SPD_LEFT_UP_SLOW;
      if(pac.xpos < 0)
        pac.xpos = 0;
      break;
    case DIRECTIONR:
      pac.xpos += SPD_RIGHT_DOWN_SLOW;
      if(pac.xpos > SCREENW - PACMANW)
        pac.xpos = SCREENW - PACMANW;
      break;
    case DIRECTIOND:     
      pac.ypos += SPD_RIGHT_DOWN_SLOW;
      if(pac.ypos > SCREENH)
        pac.ypos = SCREENH;
      break;
    case DIRECTIONU:
      pac.ypos += SPD_LEFT_UP_SLOW;
      if(pac.ypos < PACMANH)
        pac.ypos = PACMANH;
      break;
    case DIRECTIONSTOP:
      break;
  } 
  pac.center_x = pac.xpos + PACMANW/2;
  pac.center_y = pac.ypos - PACMANH/2;  
}

void MoveGhosts(void){
  int i=0;
  int chase=0;
  for(i=0; i<game_level[current_game_level].num_ghost; i++){
    if(enemyGhosts[i].ghost_state == ALIVE){
      chase = Random()%8;     // 0 to 7
      switch(chase){
        case 0:
          enemyGhosts[i].xpos += SPD_LEFT_UP_SLOW;
          if(enemyGhosts[i].xpos < 0)
            enemyGhosts[i].xpos = 0;          
          break;
        case 1:
          enemyGhosts[i].xpos += SPD_RIGHT_DOWN_SLOW;
          if(enemyGhosts[i].xpos > SCREENW - GHOSTW)
            enemyGhosts[i].xpos = SCREENW - GHOSTW;
          break;
        case 2:
          enemyGhosts[i].ypos += SPD_RIGHT_DOWN_SLOW;
          if(enemyGhosts[i].ypos > SCREENH)
            enemyGhosts[i].ypos = SCREENH;
          break;
        case 3:
          enemyGhosts[i].ypos += SPD_LEFT_UP_SLOW;
          if(enemyGhosts[i].ypos < GHOSTH)
            enemyGhosts[i].ypos = GHOSTH;
          break;
        default:
          break;
      }      
      enemyGhosts[i].center_x = enemyGhosts[i].xpos + GHOSTW/2;
      enemyGhosts[i].center_y = enemyGhosts[i].ypos - GHOSTH/2;
    }      
  }  
}

void CollisionDectection(void){
  int i=0, j=0;
  double distance;  
  // detect pacman collide with ghosts  
  for(i=0; i<game_level[current_game_level].num_ghost; i++){
    if(enemyGhosts[i].ghost_state == ALIVE){
      distance = sqrt(pow((enemyGhosts[i].center_x - pac.center_x),2) + pow((enemyGhosts[i].center_y - pac.center_y),2));
      if(distance <= (PACMANW+GHOSTW)/2 - 2){
        pac.pacman_state = DYING;
        num_lives_left -= 1;
        score -= 1000;
        //Sound_Killed();
        Sound_Explosion();
        return;                // pacman's dying
      }
    }
  }
  // detect pacman collide with power-ups  
  for(i=0; i<game_level[current_game_level].num_power_up; i++){
    if(powerups[i].powerup_state == ALIVE){
      distance = sqrt(pow((powerups[i].center_x - pac.center_x),2) + pow((powerups[i].center_y - pac.center_y),2));
      if(distance <= (PACMANW+POWERUP)/2 - 2){
        score += 100;
        powerups[i].powerup_state = DEAD;     // remove the power up
        current_num_power_ups++;              // increase the number of power up captured
        shurikens[i].state= ALIVE;    // set the corresponding missile alive, available for use
        num_allowed_shots +=1;
      }
    }
  }
  // detect shurikens collide with ghosts
  for(i=0;i<game_level[current_game_level].num_power_up;i++){
    if(shurikens[i].state == FLYING){  
      for(j=0; j<game_level[current_game_level].num_ghost; j++){
        if(enemyGhosts[j].ghost_state==ALIVE){
          distance = sqrt(pow((enemyGhosts[j].center_x - shurikens[i].center_x ),2) + pow((enemyGhosts[j].center_y - shurikens[i].center_y),2));
          if(distance <= ((double)SHURIKEN+GHOSTW)/2 - 3){
            score += 1000;
            enemyGhosts[j].ghost_state = DYING;
            shurikens[i].state= DEAD;                            
            Sound_Explosion();
          }
        }
      }
    }
  }
}

void Buttons_In(void){
  int i=0;
  if(ROTATE){        
    pac.orientation = !pac.orientation;   // rotate pacman    
    Delay1ms(50);
  }
  if(SHOOT){
    // set a shuriken to FLYING if there's one available
    for(i=0;i<game_level[current_game_level].num_power_up;i++){
      if(shurikens[i].state == ALIVE){  
        shurikens[i].state = FLYING;
        shurikens[i].direction = pac.direction;
        shurikens[i].xpos = pac.xpos;         // set to pacman's position
        shurikens[i].ypos = pac.ypos;  
        num_allowed_shots -= 1;
        //Sound_Shoot();
        break;      // shoot only once
      }        
    }
  }
}

void DisplayWinGame(void){
  char str[2];
  Nokia5110_Clear();  
  Nokia5110_SetCursor(2, 1);
  Nokia5110_OutString("YOU WIN!!");
  Nokia5110_SetCursor(0, 4);
  Nokia5110_OutString("Score : ");
  Nokia5110_SetCursor(7, 4);
  sprintf(str, "%d", score);
  Nokia5110_OutString(str);
}

void DisplayGameOver(void){
  char str[2];
  Nokia5110_Clear();  
  Nokia5110_SetCursor(2, 1);
  Nokia5110_OutString("YOU LOSE!");
  Nokia5110_SetCursor(0, 4);
  Nokia5110_OutString("Score : ");
  Nokia5110_SetCursor(7, 4);
  sprintf(str, "%d", score);
  Nokia5110_OutString(str);
  Nokia5110_SetCursor(0, 5);
  Nokia5110_OutString("Good Game :\)");
  GPIO_PORTB_DATA_R &= 0x00;      // clear all outputs
}

void MoveShruikens(void){
  int i=0;
  for(i=0;i<game_level[current_game_level].num_power_up;i++){
    if(shurikens[i].state == FLYING){
      switch(shurikens[i].direction){
        case DIRECTIONL:
          shurikens[i].xpos += SPD_LEFT_UP_NORM;
          if(shurikens[i].xpos < 0)
            shurikens[i].state = DEAD;
            break;
        case DIRECTIONR:
          shurikens[i].xpos += SPD_RIGHT_DOWN_NORM;
          if(pac.xpos > SCREENW - SHURIKEN)
          shurikens[i].state = DEAD;
          break;
        case DIRECTIOND:     
          shurikens[i].ypos += SPD_RIGHT_DOWN_NORM;
          if(pac.ypos > SCREENH)
            shurikens[i].state = DEAD;
            break;
        case DIRECTIONU:
          shurikens[i].ypos += SPD_LEFT_UP_NORM;
          if(pac.ypos < SHURIKEN)
            shurikens[i].state = DEAD;
            break;
        }
        shurikens[i].center_x = shurikens[i].xpos + SHURIKEN/2;
        shurikens[i].center_y = shurikens[i].ypos - SHURIKEN/2;
      }
    }
}

void ShootLEDOnOff(void){
  // PB4 ON signals powerup captured, can shoot
  if(num_allowed_shots>0){
    GPIO_PORTB_DATA_R |= 0x10;
  } else {
    GPIO_PORTB_DATA_R &= 0xEF;
  }
  /*
  int i =0;
  GPIO_PORTB_DATA_R &= 0xEF;      // set only PB4 off first
  for(i=0;i<game_level[current_game_level].num_power_up;i++){    
    if(shurikens[i].state == ALIVE){
      GPIO_PORTB_DATA_R |= 0x10;   // set only PB4 on
      break;
    }
  }*/
}
void FlashLED(void){
  // PB5, LED flashes signals a kill/powerup captured
  // LED will flash with sound play ==> refer to sounc.c, DAC_Out()
}


